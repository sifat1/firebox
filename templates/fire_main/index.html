<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
   integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
   crossorigin=""/>
   <!-- Make sure you put this AFTER Leaflet's CSS -->
 <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
   integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
   crossorigin=""></script>
    <title></title>
  </head>
  <body>
     <div id="mapid" style="height: 180px"></div>
     <div class="nothing">

          <p>{{ response }}</p>

     </div>
     <div id="lat"></div>
     <div id="lon"></div>
     <form class="" action="/dashboard/" method="post">
       {% csrf_token %}
       <input type="hidden" id="user_lat" name="lat" value="">
       <input type="hidden" id="user_lon" name="lon" value="">
       <button id="sbtn" type="submit"><span><i>Submit</i></span></button>
     </form>
    <a href="/">clicked</a>
     <script type="text/javascript">
      var lat = 0.0;
      var lon = 0.0;
       var mymap = L.map('mapid').setView([51.505, -0.09], 13);
       L.tileLayer('https://stamen-tiles-{s}.a.ssl.fastly.net/terrain/{z}/{x}/{y}.jpg', {
         "attribution": null,
         "detectRetina": false,
         "maxNativeZoom": 18,
         "maxZoom": 18,
         "minZoom": 0,
         "noWrap": false,
         "opacity": 1,
         "subdomains": "abc",
         "tms": false
}).addTo(mymap);
function onMapClick(e) {
    //alert("You clicked the map at " + e.latlng.lat+ e.latlng.lng);
    lat = e.latlng.lat;
    lon = e.latlng.lng;
    $("#lat").text(e.latlng.lat);
    $("#lon").text(e.latlng.lng);
    $("#user_lat").val(e.latlng.lat);
    $("#user_lon").val(e.latlng.lng);


}
function myfunction(){
  location.href = "dashboard/"+lat+"/"+lon+"/";
}

mymap.on('click', onMapClick);
     </script>
  </body>
</html>
